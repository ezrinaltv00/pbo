<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>MedMinder</title>

<style>
*{box-sizing:border-box}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Inter","Segoe UI",sans-serif;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#ffc1dc;
  overflow:hidden;
}

/* ===== EMOJI FLOATING RANDOM ===== */
.emoji{
  position:absolute;
  font-size:32px;
  opacity:0.35;
  animation: float linear infinite;
  pointer-events:none;
}

@keyframes float{
  0%{
    transform:translate(0,0) rotate(0deg);
  }
  50%{
    transform:translate(var(--x), var(--y)) rotate(180deg);
  }
  100%{
    transform:translate(0,0) rotate(360deg);
  }
}

/* ===== LOGIN CARD (TIDAK DIUBAH) ===== */
.card{
  width:360px;
  background:#fff;
  padding:28px;
  border-radius:18px;
  box-shadow:0 18px 40px rgba(0,0,0,0.25);
  position:relative;
  z-index:10;
}

h1,h2{
  margin:0 0 10px;
  font-weight:600;
  color:#222;
}
.subtitle{
  font-size:13px;
  color:#666;
  margin-bottom:20px;
}

input{
  width:100%;
  padding:12px;
  margin-bottom:12px;
  border-radius:10px;
  border:1px solid #ddd;
  font-size:14px;
}

button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-weight:600;
  font-size:14px;
}
.primary{
  background:#ff5fa2;
  color:white;
}
.secondary{
  background:#f3f3f3;
  color:#444;
  margin-top:8px;
}
.logout{
  background:#e53935;
  color:white;
}

.link{
  text-align:center;
  margin-top:14px;
  font-size:13px;
  color:#666;
}
.link span{
  color:#ff5fa2;
  cursor:pointer;
  font-weight:600;
}

.dashboard{
  text-align:left;
}
.card-box{
  background:#f9f9f9;
  border-radius:12px;
  padding:14px;
  margin-top:14px;
  font-size:14px;
}
.card-box b{
  display:block;
  margin-bottom:6px;
}
</style>
</head>

<body>

<div class="card" id="app"></div>

<script>
/* ===== RANDOM FLOATING EMOJIS ===== */
const emojis = ["üíä","ü©∫","üíâ","üß™","ü©π","üè•","üßë‚Äç‚öïÔ∏è","‚ù§Ô∏è"];
const total = 40; // BANYAK & NYEBAR

for(let i=0;i<total;i++){
  const e = document.createElement("div");
  e.className = "emoji";
  e.innerText = emojis[Math.floor(Math.random()*emojis.length)];

  // posisi RANDOM
  e.style.left = Math.random()*100 + "vw";
  e.style.top = Math.random()*100 + "vh";

  // arah gerak RANDOM
  e.style.setProperty("--x",(Math.random()*120-60)+"px");
  e.style.setProperty("--y",(Math.random()*120-60)+"px");

  // durasi RANDOM
  e.style.animationDuration = (8 + Math.random()*8) + "s";

  document.body.appendChild(e);
}

/* ===== APP ===== */
class MedMinder{
  constructor(id){
    this.app = document.getElementById(id);
    this.init();
  }

  init(){
    if(!localStorage.getItem("users")){
      localStorage.setItem("users", JSON.stringify([
        {username:"ezrina", password:"mw0rkli"}
      ]));
    }
    this.choice();
  }

  choice(){
    this.app.innerHTML = `
      <h1>MedMinder</h1>
      <div class="subtitle">Medication monitoring system</div>
      <button class="primary" onclick="app.loginPage()">Login</button>
      <button class="secondary" onclick="app.registerPage()">Register</button>
    `;
  }

  loginPage(){
    this.app.innerHTML = `
      <h2>Login</h2>
      <input id="username" placeholder="Username">
      <input id="password" type="password" placeholder="Password">
      <button class="primary" onclick="app.login()">Login</button>
      <div class="link">Belum punya akun? <span onclick="app.registerPage()">Register</span></div>
    `;
  }

  registerPage(){
    this.app.innerHTML = `
      <h2>Register</h2>
      <input id="regUser" placeholder="Username">
      <input id="regPass" type="password" placeholder="Password">
      <button class="primary" onclick="app.register()">Register</button>
      <div class="link">Sudah punya akun? <span onclick="app.loginPage()">Login</span></div>
    `;
  }

  login(){
    const u = username.value;
    const p = password.value;
    const users = JSON.parse(localStorage.getItem("users"));
    const found = users.find(x=>x.username===u && x.password===p);
    if(!found) alert("Login gagal");
    else this.dashboard(u);
  }

  register(){
    const u = regUser.value;
    const p = regPass.value;
    if(!u||!p) return alert("Data belum lengkap");
    const users = JSON.parse(localStorage.getItem("users"));
    if(users.find(x=>x.username===u)) return alert("Username sudah terdaftar");
    users.push({username:u,password:p});
    localStorage.setItem("users", JSON.stringify(users));
    this.loginPage();
  }

  dashboard(username){
    this.app.innerHTML = `
      <div class="dashboard">
        <h2>Dashboard</h2>
        <div class="subtitle">User: ${username}</div>

        <div class="card-box">
          <b>Status Hari Ini</b>
          Tidak ada jadwal obat aktif
        </div>

        <div class="card-box">
          <b>Riwayat</b>
          Belum ada data konsumsi
        </div>

        <button class="logout" onclick="app.choice()">Logout</button>
      </div>
    `;
  }
}

const app = new MedMinder("app");
</script>

</body>
</html>
