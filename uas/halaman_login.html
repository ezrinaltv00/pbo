<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>MedMinder Web</title>

<style>
/* ================= BODY & BACKGROUND ================= */
body{
  margin:0;
  font-family: "Segoe UI", sans-serif;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background-color:#ffb6d5;
  background-image:
    repeating-linear-gradient(
      45deg,
      transparent 0 80px,
      rgba(255,255,255,0.2) 80px 160px
    );
  position:relative;
  overflow:hidden;
}

/* EMOJI BACKGROUND */
body::before{
  content:"ğŸ©º ğŸ’Š ğŸ©¹ ğŸ¥ ğŸ’‰ ğŸ§ª ğŸ§‘â€âš•ï¸ â¤ï¸ ğŸ©º ğŸ’Š ğŸ©¹ ğŸ¥ ğŸ’‰ ğŸ§ª ğŸ§‘â€âš•ï¸ â¤ï¸";
  position:absolute;
  inset:0;
  font-size:42px;
  line-height:1.8;
  opacity:0.35;
  white-space:pre-wrap;
  text-align:center;
  pointer-events:none;
}

/* ================= CARD ================= */
.card{
  background:white;
  width:340px;
  padding:30px 25px;
  border-radius:20px;
  box-shadow:0 15px 35px rgba(0,0,0,0.25);
  position:relative;
  z-index:2;
  text-align:center;
}

h2{
  margin-bottom:10px;
  color:#ff4f9a;
}

.subtitle{
  font-size:13px;
  color:#777;
  margin-bottom:18px;
}

/* ================= INPUT ================= */
input{
  width:100%;
  padding:11px;
  margin:8px 0;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:14px;
}

/* ================= BUTTON ================= */
button{
  width:100%;
  padding:11px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-weight:bold;
  font-size:14px;
}

.btn-main{
  background:linear-gradient(90deg,#ff5fa2,#ff8fd3);
  color:white;
  margin-top:10px;
}

.btn-alt{
  background:#ffe3f0;
  color:#ff4f9a;
  margin-top:8px;
}

.btn-logout{
  background:#ff4d4d;
  color:white;
  margin-top:15px;
}

/* ================= LINK ================= */
.link{
  margin-top:14px;
  font-size:13px;
}

.link span{
  color:#ff4f9a;
  cursor:pointer;
  font-weight:bold;
}

/* ================= USER PAGE ================= */
.user-page{
  text-align:center;
}
</style>
</head>

<body>

<div class="card" id="app"></div>

<script>
class MedMinderApp{
  constructor(id){
    this.app = document.getElementById(id);
    this.init();
  }

  init(){
    if(!localStorage.getItem("users")){
      localStorage.setItem("users", JSON.stringify([
        {username:"ezrina", password:"mw0rkli"}
      ]));
    }
    this.renderChoice();
  }

  renderChoice(){
    this.app.innerHTML = `
      <h2>ğŸ©º MedMinder</h2>
      <div class="subtitle">Web pengingat & monitoring obat</div>
      <button class="btn-main" onclick="app.renderLogin()">Login</button>
      <button class="btn-alt" onclick="app.renderRegister()">Daftar</button>
    `;
  }

  renderLogin(){
    this.app.innerHTML = `
      <h2>Login</h2>
      <input id="username" placeholder="Username">
      <input id="password" type="password" placeholder="Password">
      <button class="btn-main" onclick="app.login()">Masuk</button>
      <div class="link">Belum punya akun? <span onclick="app.renderRegister()">Daftar</span></div>
    `;
  }

  renderRegister(){
    this.app.innerHTML = `
      <h2>Daftar</h2>
      <input id="regUser" placeholder="Username baru">
      <input id="regPass" type="password" placeholder="Password">
      <button class="btn-main" onclick="app.register()">Daftar</button>
      <div class="link">Sudah punya akun? <span onclick="app.renderLogin()">Login</span></div>
    `;
  }

  login(){
    const u = username.value;
    const p = password.value;
    const users = JSON.parse(localStorage.getItem("users"));
    const found = users.find(x => x.username===u && x.password===p);
    if(!found) alert("Username atau password salah ğŸ˜¥");
    else this.renderUser(u);
  }

  register(){
    const u = regUser.value;
    const p = regPass.value;
    if(!u || !p) return alert("Isi semua data!");
    const users = JSON.parse(localStorage.getItem("users"));
    if(users.find(x=>x.username===u)) return alert("Username sudah ada");
    users.push({username:u,password:p});
    localStorage.setItem("users", JSON.stringify(users));
    alert("Berhasil daftar ğŸ‰");
    this.renderLogin();
  }

  renderUser(username){
    this.app.innerHTML = `
      <div class="user-page">
        <h2>ğŸ’– Selamat Datang</h2>
        <p><b>${username}</b></p>
        <p>Jangan lupa minum obat ya ğŸ’Š</p>
        <button class="btn-logout" onclick="app.logout()">Logout</button>
      </div>
    `;
  }

  logout(){
    this.renderChoice();
  }
}

const app = new MedMinderApp("app");
</script>

</body>
</html>
