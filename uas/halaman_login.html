<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>MedMinder</title>

<style>
*{box-sizing:border-box}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Inter","Segoe UI",sans-serif;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#ffc1dc;
  overflow:hidden;
}

/* ================= EMOJI & SNOW FALL ================= */
.fall{
  position:absolute;
  top:-60px;
  pointer-events:none;
  animation: fall linear infinite;
}

.emoji{
  font-size:30px;
  opacity:0.4;
}

.snow{
  width:6px;
  height:6px;
  background:white;
  border-radius:50%;
  opacity:0.6;
}

@keyframes fall{
  to{
    transform:translateY(110vh);
  }
}

/* ================= LOGIN CARD ================= */
.card{
  width:360px;
  background:#fff;
  padding:28px;
  border-radius:18px;
  box-shadow:0 18px 40px rgba(0,0,0,0.25);
  position:relative;
  z-index:10;
  text-align:center; /* RATA TENGAH */
}

h1,h2{
  margin:0 0 10px;
  font-weight:600;
  color:#222;
}

.subtitle{
  font-size:13px;
  color:#666;
  margin-bottom:20px;
}

input{
  width:100%;
  padding:12px;
  margin-bottom:12px;
  border-radius:10px;
  border:1px solid #ddd;
  font-size:14px;
  text-align:center;
}

button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-weight:600;
  font-size:14px;
}

.primary{
  background:#ff5fa2;
  color:white;
}

.secondary{
  background:#f3f3f3;
  color:#444;
  margin-top:8px;
}

.logout{
  background:#e53935;
  color:white;
}

.link{
  margin-top:14px;
  font-size:13px;
  color:#666;
}
.link span{
  color:#ff5fa2;
  cursor:pointer;
  font-weight:600;
}

/* ================= DASHBOARD ================= */
.dashboard{
  text-align:center;
}
.card-box{
  background:#f9f9f9;
  border-radius:12px;
  padding:14px;
  margin-top:14px;
  font-size:14px;
}
.card-box b{
  display:block;
  margin-bottom:6px;
}
</style>
</head>

<body>

<div class="card" id="app"></div>

<script>
/* ================= FALLING BACKGROUND ================= */
const emojis = ["ðŸ’Š","ðŸ©º","ðŸ’‰","ðŸ§ª","ðŸ©¹","ðŸ¥","ðŸ§‘â€âš•ï¸","â¤ï¸"];

function createEmoji(){
  const e = document.createElement("div");
  e.className = "fall emoji";
  e.innerText = emojis[Math.floor(Math.random()*emojis.length)];
  e.style.left = Math.random()*100 + "vw";
  e.style.animationDuration = (6 + Math.random()*6) + "s";
  document.body.appendChild(e);
  setTimeout(()=>e.remove(),12000);
}

function createSnow(){
  const s = document.createElement("div");
  s.className = "fall snow";
  s.style.left = Math.random()*100 + "vw";
  s.style.animationDuration = (5 + Math.random()*5) + "s";
  document.body.appendChild(s);
  setTimeout(()=>s.remove(),10000);
}

setInterval(createEmoji,400);
setInterval(createSnow,120);

/* ================= APP ================= */
class MedMinder{
  constructor(id){
    this.app = document.getElementById(id);
    this.init();
  }

  init(){
    if(!localStorage.getItem("users")){
      localStorage.setItem("users", JSON.stringify([
        {username:"ezrina", password:"mw0rkli"}
      ]));
    }
    this.choice();
  }

  choice(){
    this.app.innerHTML = `
      <h1>ðŸ’Š MedMinder</h1>
      <div class="subtitle">Medication monitoring system</div>
      <button class="primary" onclick="app.loginPage()">Login</button>
      <button class="secondary" onclick="app.registerPage()">Register</button>
    `;
  }

  loginPage(){
    this.app.innerHTML = `
      <h2>Login</h2>
      <input id="username" placeholder="Username">
      <input id="password" type="password" placeholder="Password">
      <button class="primary" onclick="app.login()">Login</button>
      <div class="link">Belum punya akun? <span onclick="app.registerPage()">Register</span></div>
    `;
  }

  registerPage(){
    this.app.innerHTML = `
      <h2>Register</h2>
      <input id="regUser" placeholder="Username">
      <input id="regPass" type="password" placeholder="Password">
      <button class="primary" onclick="app.register()">Register</button>
      <div class="link">Sudah punya akun? <span onclick="app.loginPage()">Login</span></div>
    `;
  }

  login(){
    const u = username.value;
    const p = password.value;
    const users = JSON.parse(localStorage.getItem("users"));
    const found = users.find(x=>x.username===u && x.password===p);
    if(!found) alert("Login gagal");
    else this.dashboard(u);
  }

  register(){
    const u = regUser.value;
    const p = regPass.value;
    if(!u||!p) return alert("Data belum lengkap");
    const users = JSON.parse(localStorage.getItem("users"));
    if(users.find(x=>x.username===u)) return alert("Username sudah terdaftar");
    users.push({username:u,password:p});
    localStorage.setItem("users", JSON.stringify(users));
    this.loginPage();
  }

  dashboard(username){
    this.app.innerHTML = `
      <div class="dashboard">
        <h2>Dashboard</h2>
        <div class="subtitle">User: ${username}</div>

        <div class="card-box">
          <b>Status Hari Ini</b>
          Tidak ada jadwal obat aktif
        </div>

        <div class="card-box">
          <b>Riwayat</b>
          Belum ada data konsumsi
        </div>

        <button class="logout" onclick="app.choice()">Logout</button>
      </div>
    `;
  }
}

const app = new MedMinder("app");
</script>

</body>
</html>
