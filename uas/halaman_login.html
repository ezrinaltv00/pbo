<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>MedMinder</title>

<style>
body {
  margin: 0;
  font-family: "Comic Sans MS", Arial, sans-serif;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;

  background-color: #ffc0d9;
  overflow: hidden;
}

/* BACKGROUND EMOJI */
.bg-icons {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1;
}

.bg-icons span {
  position: absolute;
  font-size: 42px;
  opacity: 0.45; /* LEBIH KELIHATAN */
  animation: float 12s infinite ease-in-out;
}

/* POSISI ACAK */
.bg-icons span:nth-child(1){top:5%;left:8%;}
.bg-icons span:nth-child(2){top:15%;right:10%;}
.bg-icons span:nth-child(3){top:30%;left:15%;}
.bg-icons span:nth-child(4){top:45%;right:5%;}
.bg-icons span:nth-child(5){top:60%;left:5%;}
.bg-icons span:nth-child(6){top:70%;right:15%;}
.bg-icons span:nth-child(7){bottom:10%;left:20%;}
.bg-icons span:nth-child(8){bottom:20%;right:25%;}
.bg-icons span:nth-child(9){top:50%;left:30%;}
.bg-icons span:nth-child(10){top:10%;left:45%;}
.bg-icons span:nth-child(11){top:80%;left:50%;}
.bg-icons span:nth-child(12){top:35%;right:35%;}

@keyframes float {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-12px); }
}

.box {
  background: #ffffff;
  width: 360px;
  padding: 25px;
  border-radius: 24px;
  box-shadow: 0 18px 35px rgba(0,0,0,0.25);
  text-align: center;
  position: relative;
  z-index: 2;
}

h2 {
  margin-bottom: 5px;
  color: #ff4f9a;
}

.subtitle {
  font-size: 13px;
  color: #888;
  margin-bottom: 15px;
}

.icons {
  font-size: 34px;
  margin-bottom: 12px;
}

input, select {
  width: 100%;
  padding: 10px;
  margin: 7px 0;
  border-radius: 12px;
  border: 1px solid #ccc;
}

button {
  width: 100%;
  padding: 10px;
  border: none;
  border-radius: 14px;
  font-weight: bold;
  cursor: pointer;
  margin-top: 8px;
}

.primary {
  background: #ff5fa2;
  color: white;
}

.secondary {
  background: #ffe1ee;
}

.danger {
  background: #e53935;
  color: white;
}

.card {
  background: #fff1f7;
  padding: 10px;
  border-radius: 14px;
  margin-bottom: 8px;
  font-size: 14px;
}

.card.done {
  opacity: 0.6;
  text-decoration: line-through;
}

small {
  color: #666;
}
</style>
</head>

<body>

<!-- EMOJI BACKGROUND -->
<div class="bg-icons">
  <span>ğŸ©º</span>
  <span>ğŸ’Š</span>
  <span>ğŸ¥</span>
  <span>ğŸ’‰</span>
  <span>ğŸ©¹</span>
  <span>ğŸŒ¡ï¸</span>
  <span>ğŸ©»</span>
  <span>ğŸš‘</span>
  <span>ğŸ’Š</span>
  <span>ğŸ©º</span>
  <span>ğŸ©¹</span>
  <span>ğŸ’‰</span>
</div>

<div class="box" id="app"></div>

<script>
class MedMinder {
  constructor(id){
    this.app = document.getElementById(id);
    this.showHome();
  }

  showHome(){
    this.app.innerHTML = `
      <h2>MedMinder</h2>
      <div class="icons">ğŸ©º ğŸ’Š ğŸŒ¡ï¸</div>
      <div class="subtitle">Pantau jadwal minum obat dengan cara imut ğŸ’•</div>
      <button class="primary" onclick="app.renderLogin()">Login</button>
      <button class="secondary" onclick="app.renderRegister()">Daftar</button>
    `;
  }

  renderRegister(){
    this.app.innerHTML = `
      <h2>Daftar Akun</h2>
      <div class="icons">ğŸ’‰ ğŸ’Š</div>
      <input id="regUser" placeholder="Username">
      <input id="regPass" type="password" placeholder="Password">
      <button class="primary" onclick="app.register()">Daftar</button>
      <button class="secondary" onclick="app.showHome()">Kembali</button>
    `;
  }

  register(){
    const u = regUser.value.trim();
    const p = regPass.value.trim();
    if(!u || !p) return alert("Data belum lengkap");

    let users = JSON.parse(localStorage.getItem("users")) || [];
    if(users.find(x=>x.username===u))
      return alert("Username sudah ada");

    users.push({username:u,password:p});
    localStorage.setItem("users", JSON.stringify(users));
    alert("Berhasil daftar ğŸ’•");
    this.renderLogin();
  }

  renderLogin(){
    this.app.innerHTML = `
      <h2>Login</h2>
      <div class="icons">ğŸ©¹ ğŸ©º</div>
      <input id="username" placeholder="Username">
      <input id="password" type="password" placeholder="Password">
      <button class="primary" onclick="app.login()">Login</button>
      <button class="secondary" onclick="app.showHome()">Kembali</button>
    `;
  }

  login(){
    const u = username.value.trim();
    const p = password.value.trim();
    const users = JSON.parse(localStorage.getItem("users")) || [];

    const found = users.find(x=>x.username===u && x.password===p);
    if(!found) return alert("Login gagal ğŸ˜¢");

    this.currentUser = u;
    if(!localStorage.getItem(u+"_meds"))
      localStorage.setItem(u+"_meds","[]");

    this.renderDashboard();
  }

  renderDashboard(){
    this.app.innerHTML = `
      <h2>Dashboard</h2>
      <div class="icons">ğŸ’Š ğŸ“‹</div>
      <small>Hai <b>${this.currentUser}</b> ğŸ’–</small>
      <button class="secondary" onclick="app.renderAdd()">+ Tambah Obat</button>
      <div id="list"></div>
      <button class="danger" onclick="app.logout()">Logout</button>
    `;
    this.renderList();
  }

  renderAdd(){
    this.app.innerHTML = `
      <h2>Tambah Obat</h2>
      <div class="icons">ğŸ’Š</div>
      <input id="nama" placeholder="Nama Obat">
      <select id="aturan">
        <option>Sebelum Makan</option>
        <option>Sesudah Makan</option>
      </select>
      <select id="freq">
        <option value="1">1x Sehari</option>
        <option value="2">2x Sehari</option>
        <option value="3">3x Sehari</option>
      </select>
      <button class="primary" onclick="app.save()">Simpan</button>
      <button class="secondary" onclick="app.renderDashboard()">Kembali</button>
    `;
  }

  save(){
    if(!nama.value) return alert("Nama obat wajib diisi");
    const meds = JSON.parse(localStorage.getItem(this.currentUser+"_meds"));
    meds.push({
      nama:nama.value,
      aturan:aturan.value,
      freq:freq.value,
      time:new Date().toLocaleString(),
      done:false
    });
    localStorage.setItem(this.currentUser+"_meds",JSON.stringify(meds));
    this.renderDashboard();
  }

  renderList(){
    const list = document.getElementById("list");
    const meds = JSON.parse(localStorage.getItem(this.currentUser+"_meds"));
    list.innerHTML = meds.length ? "" : "<small>Belum ada obat ğŸ’Š</small>";

    meds.forEach((m,i)=>{
      const div = document.createElement("div");
      div.className = "card"+(m.done?" done":"");
      div.innerHTML = `
        <b>${m.nama}</b><br>
        ${m.freq}x â€¢ ${m.aturan}<br>
        <small>${m.time}</small><br>
        <button class="secondary" onclick="app.toggle(${i})">
          ${m.done?"Batal":"âœ” Sudah"}
        </button>
      `;
      list.appendChild(div);
    });
  }

  toggle(i){
    const meds = JSON.parse(localStorage.getItem(this.currentUser+"_meds"));
    meds[i].done = !meds[i].done;
    localStorage.setItem(this.currentUser+"_meds",JSON.stringify(meds));
    this.renderList();
  }

  logout(){
    this.currentUser = null;
    this.showHome();
  }
}

const app = new MedMinder("app");
</script>
</body>
</html>
